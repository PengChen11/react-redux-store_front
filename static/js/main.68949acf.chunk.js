(this["webpackJsonpreact-redux-store_front"]=this["webpackJsonpreact-redux-store_front"]||[]).push([[0],{96:function(t,e,c){},97:function(t,e,c){"use strict";c.r(e);var n=c(2),r=c(0),a=c.n(r),i=c(19),o=c.n(i),s=c(22),d=c(20),u=c(46),p=c(16),j=c.n(p),l=c(24),b=c(7),O=c(37),h={categories:[],active:null,isLoading:!0};var m=c(37),f={products:[],isLoading:!0,pendingAddToCart:!1};var x=c(53),g={itemsInCart:[]};var v=c(48),y=Object(d.combineReducers)({categoryStore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0,c=e.type,n=e.payload;switch(c){case"categories/initialize":return Object(b.a)(Object(b.a)({},t),{},{categories:n,active:n[0],isLoading:!1});case"categories/active":return Object(b.a)(Object(b.a)({},t),{},{active:n});default:return t}},productStore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,e=arguments.length>1?arguments[1]:void 0,c=e.type,n=e.payload;switch(c){case"products/initialize":return Object(b.a)(Object(b.a)({},t),{},{products:n,isLoading:!1});case"products/loading":return Object(b.a)(Object(b.a)({},t),{},{pendingAddToCart:!0});case"products/reduceQty":var r=t.products.map((function(t){return t._id===n._id?n:t}));return Object(b.a)(Object(b.a)({},t),{},{products:r,pendingAddToCart:!1});case"products/increaseQty":return Object(b.a)(Object(b.a)({},t),{},{products:n});default:return t}},cartStore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,e=arguments.length>1?arguments[1]:void 0,c=e.type,n=e.payload;switch(c){case"cart/addItem":if(0===t.itemsInCart.filter((function(t){return t.product._id===n._id})).length){var r={itemsInCart:[].concat(Object(x.a)(t.itemsInCart),[{product:Object(b.a)(Object(b.a)({},n),{},{inStock:n.inStock-1}),quantity:1}])};return r}var a={itemsInCart:t.itemsInCart.map((function(t){return t.product._id===n._id?{product:Object(b.a)(Object(b.a)({},n),{},{inStock:n.inStock-1}),quantity:t.quantity+1}:t}))};return a;case"cart/removeItem":return{itemsInCart:t.itemsInCart.filter((function(t){return t.product._id!==n}))};default:return t}}}),S=Object(d.createStore)(y,Object(u.composeWithDevTools)(Object(d.applyMiddleware)(v.a))),C=c(11),k=c(118),w=c(119),I=c(121),N=c(99),_=c(120),T=c(116),L=Object(T.a)((function(t){return{toolbar:{background:"#f5f5f5",color:"#111"},cartLink:{alignSelf:"center",textAlign:"right"},appBar:{zIndex:1e3}}}));function B(){var t=L(),e=Object(C.c)((function(t){return t.cartStore.itemsInCart})),c=0;return e.forEach((function(t){c+=t.quantity})),Object(n.jsx)(k.a,{className:t.appBar,position:"relative",children:Object(n.jsx)(w.a,{className:t.toolbar,children:Object(n.jsxs)(_.a,{container:!0,children:[Object(n.jsx)(_.a,{item:!0,xs:!0,children:Object(n.jsx)(N.a,{component:s.b,to:"/",children:Object(n.jsx)(I.a,{variant:"h4",children:"Our Store"})})}),Object(n.jsx)(_.a,{item:!0,xs:!0,className:t.cartLink,children:Object(n.jsxs)(N.a,{component:s.b,to:"/",children:["Cart (",c,")"]})})]})})})}var z=Object(T.a)((function(t){return{footer:{backgroundColor:"#eee",padding:t.spacing(6)}}})),q=function(t){var e=z();return Object(n.jsxs)("footer",{className:e.footer,children:[Object(n.jsx)(I.a,{variant:"h6",align:"center",gutterBottom:!0,children:"\xa9 2020 Javascript 401"}),Object(n.jsx)(I.a,{variant:"subtitle1",align:"center",color:"textSecondary",component:"p",children:"React + Redux + Material UI"})]})},A=c(18),Q=c(30),D=c.n(Q),F=c(122),M=c(123),E=Object(T.a)((function(t){return{categories:{margin:t.spacing(3)},activeContent:{padding:t.spacing(8,0,6)},categoryName:{textTransform:"uppercase"}}}));function R(){var t=E(),e=Object(C.c)((function(t){return t.categoryStore.categories})),c=Object(C.c)((function(t){return t.categoryStore.active})),a=Object(C.c)((function(t){return t.categoryStore.isLoading})),i=Object(C.b)();return Object(r.useEffect)((function(){i(function(){var t=Object(l.a)(j.a.mark((function t(e){var c,n,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="".concat("https://peng-authenticated-api-server.herokuapp.com","/api/categories"),t.next=3,O.get(c);case 3:n=t.sent,r=n.data,e({type:"categories/initialize",payload:r});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[i]),Object(n.jsxs)("div",{className:t.categories,children:[Object(n.jsx)(I.a,{variant:"h5",children:"Browse our Categories"}),Object(n.jsx)(A.a,{condition:a,children:Object(n.jsx)(D.a,{type:"bubbles",color:"grey",width:150})}),Object(n.jsxs)(A.a,{condition:!a,children:[Object(n.jsx)(F.a,{variant:"text",color:"primary","aria-label":"text primary button group",children:e.map((function(t){return Object(n.jsx)(N.a,{color:c?t.name===c.name?null:"primary":null,onClick:function(){return function(t){i(function(t){return{type:"categories/active",payload:t}}(t))}(t)},children:t.name},t.name)}))}),Object(n.jsx)("div",{className:t.activeContent,children:Object(n.jsxs)(M.a,{maxWidth:"sm",children:[Object(n.jsx)(I.a,{component:"h1",variant:"h2",className:t.categoryName,align:"center",color:"textPrimary",gutterBottom:!0,children:c?c.name:null}),Object(n.jsx)(I.a,{variant:"h5",align:"center",color:"textSecondary",paragraph:!0,children:c?c.description:null})]})})]})]})}var G=c(124),J=c(125),P=c(126),W=c(127),H=Object(T.a)((function(t){return{cardGrid:{paddingTop:t.spacing(8),paddingBottom:t.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1}}}));function U(){var t=H(),e=Object(C.c)((function(t){return t.productStore.products})),c=Object(C.c)((function(t){return t.categoryStore.active})),a=Object(C.c)((function(t){return t.productStore.isLoading})),i=Object(C.c)((function(t){return t.productStore.pendingAddToCart})),o=Object(C.b)(),d=function(t){o({type:"products/loading"}),o(function(t){return{type:"cart/addItem",payload:t}}(t)),o(function(t){return function(){var e=Object(l.a)(j.a.mark((function e(c){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("https://peng-authenticated-api-server.herokuapp.com","/api/products"),r=Object(b.a)(Object(b.a)({},t),{},{inStock:t.inStock-1}),e.next=4,m.put("".concat(n,"/").concat(t._id),r);case 4:c({type:"products/reduceQty",payload:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(t))};return Object(r.useEffect)((function(){var t;c&&o((t=c.name,function(){var e=Object(l.a)(j.a.mark((function e(c){var n,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("https://peng-authenticated-api-server.herokuapp.com","/api/products/category/").concat(t),e.next=3,m.get(n);case 3:r=e.sent,a=r.data,c({type:"products/initialize",payload:a});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[c,o]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(A.a,{condition:a,children:Object(n.jsx)(D.a,{type:"bubbles",color:"grey",width:150})}),Object(n.jsx)(A.a,{condition:!a,children:Object(n.jsx)(M.a,{className:t.cardGrid,maxWidth:"md",children:Object(n.jsx)(_.a,{container:!0,spacing:4,children:e.map((function(e){return Object(n.jsx)(_.a,{item:!0,xs:12,sm:6,md:4,children:Object(n.jsxs)(G.a,{className:t.card,children:[Object(n.jsx)(J.a,{className:t.cardMedia,image:e.img,title:e.name}),Object(n.jsxs)(P.a,{className:t.cardContent,children:[Object(n.jsx)(I.a,{gutterBottom:!0,variant:"h5",component:"h2",display:"inline",children:e.name}),Object(n.jsxs)(I.a,{align:"right",children:["Qty:",e.inStock]}),Object(n.jsx)(I.a,{children:e.description})]}),Object(n.jsxs)(W.a,{children:[Object(n.jsx)(N.a,{size:"small",color:"primary",onClick:function(){return d(e)},disabled:!(0!==e.inStock&&!i),children:"Add To Cart"}),Object(n.jsx)(N.a,{size:"small",color:"primary",component:s.b,to:"/product/".concat(e._id),children:"View Details"})]})]})},e.name)}))})})})]})}c(96);var V=Object(T.a)((function(t){return{item:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},remove:{cursor:"pointer",color:"#eee",width:"15px",height:"15px",background:"#800",lineHeight:"13px",borderRadius:"50%",padding:"0 4px",fontSize:"15px"}}}));function K(){var t=V(),e=Object(C.c)((function(t){return t.cartStore.itemsInCart})),c=Object(C.b)(),r=function(t){var e;c({type:"cart/removeItem",payload:t.product._id}),c((e=t,function(){var t=Object(l.a)(j.a.mark((function t(c){var n,r,a,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat("https://peng-authenticated-api-server.herokuapp.com","/api/products"),r=Object(b.a)(Object(b.a)({},e.product),{},{inStock:e.quantity+e.product.inStock}),t.next=4,m.put("".concat(n,"/").concat(e.product._id),r);case 4:return t.next=6,m.get("".concat(n,"/category/").concat(e.product.category));case 6:a=t.sent,i=a.data,c({type:"products/increaseQty",payload:i});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))};return Object(n.jsx)(A.a,{condition:e,children:Object(n.jsx)(A.a,{condition:e&&e.length>0,children:Object(n.jsxs)("div",{className:"simple-cart",children:[Object(n.jsx)("ul",{children:e.map((function(e){return Object(n.jsxs)("li",{className:t.item,children:[Object(n.jsx)("span",{children:e.product.name}),Object(n.jsxs)("span",{children:["Qty: ",e.quantity]}),Object(n.jsx)("span",{className:t.remove,onClick:function(){return r(e)},children:"x"})]},e.product._id)}))}),Object(n.jsx)("div",{className:"footer"})]})})})}var X=c(128);var Y=function(){return Object(n.jsxs)(C.a,{store:S,children:[Object(n.jsx)(X.a,{}),Object(n.jsx)(B,{}),Object(n.jsxs)("main",{children:[Object(n.jsx)(R,{}),Object(n.jsx)(U,{}),Object(n.jsx)(K,{})]}),Object(n.jsx)(q,{})]})},Z=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,130)).then((function(e){var c=e.getCLS,n=e.getFID,r=e.getFCP,a=e.getLCP,i=e.getTTFB;c(t),n(t),r(t),a(t),i(t)}))};o.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(s.a,{children:Object(n.jsx)(Y,{})})}),document.getElementById("root")),Z()}},[[97,1,2]]]);
//# sourceMappingURL=main.68949acf.chunk.js.map